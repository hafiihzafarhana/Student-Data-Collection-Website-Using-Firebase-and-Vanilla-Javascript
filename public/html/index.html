<!DOCTYPE html>
<html
  lang="en"
  class="light-style layout-menu-fixed"
  >
  <!-- dir="ltr"
  data-theme="theme-default"
  data-assets-path="../assets/"
  data-template="vertical-menu-template-free" -->
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />

    <title>Dashboard | ADK</title>

    <meta name="description" content="" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="./../assets/img/gambarku/logo/logo.png" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />

    <!-- Icons. Uncomment required icon fonts -->
    <!-- <link rel="stylesheet" href="../assets/vendor/fonts/boxicons.css" /> -->
    <link rel="stylesheet" href="./../assets/vendor/fonts/boxicons.css">
    <!-- Core CSS -->
    <link rel="stylesheet" href="../assets/vendor/css/core.css" class="template-customizer-core-css" />
    <link rel="stylesheet" href="../assets/vendor/css/theme-default.css" class="template-customizer-theme-css" />
    <link rel="stylesheet" href="../assets/css/demo.css" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />

    <link rel="stylesheet" href="../assets/vendor/libs/apex-charts/apex-charts.css" />

    <!-- Page CSS -->

    <!-- Helpers -->
    <script src="../assets/vendor/js/helpers.js"></script>

    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="../assets/js/config.js"></script>
  </head>

  <body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
      <div class="layout-container">
        <!-- Menu -->

        <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
          <div class="app-brand demo">
            <a href="index.html" class="app-brand-link">
              <img src="./../assets/img/gambarku/logo/logo.png" style="width: 20%;" alt="">
              <span class="app-brand-logo demo">
              </span>
              <span class="app-brand-text demo menu-text fw-bolder ms-2">Aplikasi Data <br> Akademik</span>
            </a>

            <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
              <i class="bx bx-chevron-left bx-sm align-middle"></i>
            </a>
          </div>

          <div class="menu-inner-shadow"></div>

          <ul class="menu-inner py-1">
            
            <li class="menu-item">
              <a href="home.html" class="menu-link">
                <i class='menu-icon tf-icons bx bxs-home' ></i>
                <div data-i18n="Analytics">Halaman Utama</div>
              </a>
            </li>

            <!-- Dashboard -->
            <li class="menu-item active">
              <a href="index.html" class="menu-link">
                <i class="menu-icon tf-icons bx bx-home-circle"></i>
                <div data-i18n="Analytics">Beranda</div>
              </a>
            </li>

            <li class="menu-item harus_login" id="kehadiran">
              <a href="kehadiran.html" class="menu-link">
                  <i class='menu-icon tf-icons bx bx-door-open'></i>
                <div data-i18n="Analytics">Kehadiran</div>
              </a>
            </li>

            <!-- Layouts -->
            <li class="menu-item harus_login">
              <a href="javascript:void(0);" class="menu-link menu-toggle">
                <i class="menu-icon tf-icons bx bx-layout"></i>
                <div data-i18n="Layouts">Tampil</div>
              </a>

              <ul class="menu-sub">
                <li class="menu-item">
                  <a href="tampil_data.html" class="menu-link">
                    <div data-i18n="Fluid">Tampil Data</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="tampil_grafik.html" class="menu-link">
                    <div data-i18n="Blank">Tampil Grafik</div>
                  </a>
                </li>
              </ul>
            </li>

            <li class="menu-item harus_login" id="super_admin_button">
              <a href="javascript:void(0);" class="menu-link menu-toggle">
                <i class='menu-icon tf-icons bx bx-book-reader'></i>
                <div data-i18n="Layouts">Super Admin</div>
              </a>

              <ul class="menu-sub">
                <li class="menu-item">
                  <a href="tambah_nama.html" class="menu-link">
                    <div data-i18n="Fluid">Tambah Nama</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="atur_akun.html" class="menu-link">
                    <div data-i18n="Blank">Atur Akun</div>
                  </a>
                </li>
              </ul>
            </li>

            <li class="menu-item harus_login" id="artikel_button">
              <a href="javascript:void(0);" class="menu-link menu-toggle">
                <!-- <i class='menu-icon tf-icons bx bx-book-reader'></i> -->
                <i class='menu-icon tf-icons bx bxl-blogger'></i>
                <div data-i18n="Layouts">Atur Artikel</div>
              </a>

              <ul class="menu-sub">
                <li class="menu-item">
                  <a href="tambah_artikel.html" class="menu-link">
                    <div data-i18n="Fluid">Tambah Artikel</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="data_artikel.html" class="menu-link">
                    <div data-i18n="Blank">Data Artikel</div>
                  </a>
                </li>
                <li class="menu-item">
                  <a href="kategori_artikel.html" class="menu-link">
                    <div data-i18n="Fluid">Kategori Artikel</div>
                  </a>
                </li>
              </ul>
            </li>

          </ul>
        </aside>
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
          <!-- Navbar -->

          <nav
            class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme"
            id="layout-navbar"
          >
            <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
              <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                <i class="bx bx-menu bx-sm"></i>
              </a>
            </div>

            <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">

              <ul class="navbar-nav flex-row align-items-center ms-auto">
                <p class="pt-3 mx-2 user_link"></p>
                <!-- User -->
                <li class="nav-item navbar-dropdown dropdown-user dropdown">
                  <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                    <img src="" id="foto_prof1" style="width: 30px;" class="img-fluid" alt="">
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end">

                    <li id="profile_index">
                      <a class="dropdown-item" href="#">
                        <div class="d-flex">
                          <div class="flex-shrink-0 me-3">
                            <div class="avatar avatar-online">
                              <!-- foto prfoile -->
                              <img src="" id="foto_prof2" style="width: 30px;" class="img-fluid" alt="">
                            </div>
                          </div>
                          <div class="flex-grow-1">
                            <span class="fw-semibold d-block user_link"></span>
                            <small class="text-muted" id="status_pengguna">Admin</small>
                          </div>
                        </div>
                      </a>
                      <!-- <li>
                        <div class="dropdown-divider"></div>
                      </li> -->
                    </li>


                    <li id="my_profile">
                      <a class="dropdown-item" href="profil_diri.html" id="profile">
                        <i class="bx bx-user me-2"></i>
                        <span class="align-middle">Biodata</span>
                      </a>
                    </li>

                    <li>
                      <a class="dropdown-item" id="logout_link">
                        <i class="bx bx-log-out display"></i>
                        <span class="align-middle">Logout</span>
                      </a>
                    </li>

                  </ul>
                </li>
                <!--/ User -->
              </ul>
            </div>
          </nav>

          <!-- / Navbar -->

          <!-- Content wrapper -->
          <div class="content-wrapper">
            <!-- Content -->

            <div class="container-xxl flex-grow-1 container-p-y">
              
              <div class="row mb-3">
                <nav aria-label="breadcrumb">
                  <ol class="breadcrumb breadcrumb-style2 mb-0">
                    <li class="active">
                      <h4>
                        <a href="index.html">Beranda / </a>
                      </h4>
                    </li>
                  </ol>
                </nav>
              </div>

              <div class="row">
                <!-- Jumbotron -->
                <div class="col-lg-12 mb-4 order-0">
                  <div class="card">
                    <div class="d-flex align-items-end row">
                      <div class="col-sm-12">
                        <div class="card-body">

                          <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-indicators">
                              <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                              <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
                            </div>
                            <div class="carousel-inner">
                              <div class="carousel-item active">
                                <img src="./../assets/img/gambarku/jumbo_1.jpg" class="d-block w-100" alt="...">
                                <div class="carousel-caption d-none d-md-block">
                                  <h3>Tujuan Proyek Ini</h3>
                                  <p>Membangun Sistem Pendataan Siswa dengan Menggunakan CRUD (Create, Update, Read, dan Delete)</p>
                                </div>
                              </div>
                              <div class="carousel-item">
                                <img src="./../assets/img/gambarku/jumbo_2.jpg" class="d-block w-100" alt="...">
                                <div class="carousel-caption d-none d-md-block">
                                  <h3>Komponen Penting</h3>
                                  <p>Firebase 9.6 , Bootstrap, JQuery, Vanilla JS, HTML 5, CSS 3, Chart JS, DataTable, XLSX, HTML2PDF</p>
                                </div>
                              </div>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                              <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                              <span class="carousel-control-next-icon" aria-hidden="true"></span>
                              <span class="visually-hidden">Next</span>
                            </button>
                          </div>

                          <!-- <a href="javascript:;" class="btn btn-sm btn-outline-primary">View Badges</a> -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- selamat datang -->
                <div class="col-lg-12 col-md-12 order-1">
                  <div class="row">
                    <div class="col-lg-12 col-md-12 col-12 mb-4">
                      <div class="card">
                        <div class="card-body">
                          <div class="card-title align-items-start justify-content-between">

                            <div class="row">
                              <h3 class="text-center" id="selamat_datang"></h3>
                              <div class="col">
                                <p class="text-center">Kami adalah Kelompok 1 Pemrograman WEB UPN Veteran Jawa Timur Angkatan 2020. Kami membuat website yang bertujuan untuk menampilkan data dari sebuah database menggunakan Chart JS dan untuk mendapatkan datanya menggunakan Sistem Crud (Create, Read, Update, Delete)</p>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- penjelasan fitur -->
                <div class="col-lg-12 col-md-12 order-1">
                  <div class="row">
                    <div class="col-lg-12 col-md-12 col-12 mb-4">
                      <div class="card">
                        <div class="card-body">
                          <div class="card-title align-items-start justify-content-between">

                            <div class="row">
                              <div class="col">
                                <p class="text-center mx-auto"><b>Apa yang bisa dilakukan oleh produk kami ?</b></p>
                              </div>
                            </div>
                          
                            <div class="row">
                              <div class="col">
                                <ul>
                                  <li>Menambahkan sebuh data siswa sekaligus menambahkan data nilai</li>
                                  <li>Mengedit dan mengupdate data siswa</li>
                                  <li>Melihat detail data siswa</li>
                                  <li>Menghapus data siswa</li>
                                  <li>Mendapatkan grafik data berbentuk batang dan donat</li>
                                  <li>Memiliki sistem login dan registrasi</li>
                                  <li>Terdiri dari 3 jenis pengguna (Super Admin, Admin, User)</li>
                                  <li>Ekspor ke PDF</li>
                                  <li>Ekspor ke Excel</li>
                                  <li>Mendapatkan data nilai tertinggi</li>
                                  <li>Searching (pencarian) dan Ordering (Pengurutan)</li>
                                  <li>Sistem berjalan tanpa spam</li>
                                </ul>
                              </div>
                            </div>

                            <div class="row">
                              <div class="col">

                              </div>
                            </div>
                          
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>

              <div class="row">
                <!-- Order Statistics -->
                <div class="col-md-6 col-lg-4 col-xl-4 order-0 mb-4">
                  <div class="card h-100">
                    <div class="card-body">
                      <h5 class="card-title">Super Admin</h5>
                      <p>Super Admin adalah struktur tertinggi atau pengendali penuh berjalanya sistem</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-4 col-xl-4 order-0 mb-4">
                  <div class="card h-100">
                    <div class="card-body">
                      <h5 class="card-title">Admin</h5>
                      <p>Admin adalah struktur ke dua setelah Super Admin. Admin hanya bertugas untuk melakukan CRUD pada data siswa</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 col-lg-4 col-xl-4 order-0 mb-4">
                  <div class="card h-100">
                    <div class="card-body">
                      <h5 class="card-title">User</h5>
                      <p>User adalah struktur ke tiga yang memiliki akses untuk melihat detail data siswa dan chart JS</p>
                    </div>
                  </div>
                </div>
                <!--/ Order Statistics -->
              </div>

              <div class="row">
                <!-- Order Statistics -->
                <div class="col-md-12 col-lg-12 col-xl-12 order-0 mb-4">
                  <div class="card h-100">
                    <div class="card-body">
                      <div class="astro">
                        <div class="astronaut-walk mx-auto"></div>
                        <p class="text-center"><b>"Kejar Banyak Mimpi, Mimpimu Tidak Boleh Satu" <br> -Calon Orang Sukses</b></p>
                      </div>
                      <div class="col text-center">
                        <a href="tampil_data.html" class="btn rounded-pill btn-primary">Klik Jika Ingin Mencoba !</a>
                      </div>
                    </div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <!-- Order Statistics -->
                  <div class="col-md-12 col-lg-12 col-xl-12 order-0 mb-4">
                    <div class="card h-100">
                      <div class="card-body">
                        <h3 class="text-center">Daftar Siswa Berprestasi</h3>
                        <div class="row" id="tertinggi">

                        </div>
                      </div>
                      </div>
                    </div>
                  </div>

                <!--/ Order Statistics -->
              </div>
            </div>
            <!-- / Content -->

            <!-- Footer -->
            <footer class="content-footer footer bg-footer-theme">
              <div class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
                <div class="mb-2 mb-md-0 text-center">
                  ©
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  ,
                  <a href="http://nusantararaya.joomla.com/" target="_blank" class="footer-link fw-bolder">PT Teknologi Nusantara</a>
                </div>
              </div>
            </footer>
            <!-- / Footer -->

            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>
    </div>
    <!-- / Layout wrapper -->

    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <script src="../assets/vendor/libs/jquery/jquery.js"></script>
    <script src="../assets/vendor/libs/popper/popper.js"></script>
    <script src="../assets/vendor/js/bootstrap.js"></script>
    <script src="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>

    <script src="../assets/vendor/js/menu.js"></script>
    <!-- endbuild -->

    <!-- Vendors JS -->
    <script src="../assets/vendor/libs/apex-charts/apexcharts.js"></script>

    <!-- Main JS -->
    <script src="../assets/js/main.js"></script>
    
    <!-- Page JS -->
    <script src="../assets/js/dashboards-analytics.js"></script>

    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>

    <!-- script -->
    <script>
      // -------------------------------------------- Enkripsi ------------------------------------------
      let user_link = document.getElementsByClassName("user_link");
      const logout_link = document.getElementById('logout_link');
      const selamat_datang = document.getElementById('selamat_datang');
      const tambah_data_halaman_legal = document.getElementById('tambah_data_halaman_legal');
      const profile_index = document.getElementById("profile_index");
      const profile = document.getElementById("profile");
      const status_pengguna = document.getElementById("status_pengguna");
      let harus_login = document.querySelectorAll(".harus_login");
      let main_konten = document.getElementById("main_konten");
      var pengguna_saat_ini = null;

      let foto_prof1 = document.getElementById("foto_prof1")
      let foto_prof2 = document.getElementById("foto_prof2")

       // -------------------------------------------- function ------------------------------------------
      function getUsername(){
        let tetap_login = localStorage.getItem("tetap_login");

        if(tetap_login == "benar"){
          pengguna_saat_ini = JSON.parse(localStorage.getItem("user"));
        }
        else{
          pengguna_saat_ini = JSON.parse(sessionStorage.getItem("user"));
        }
      }

      // console.log(pengguna_saat_ini)

      function logout(){
        sessionStorage.removeItem("user");
        localStorage.removeItem("user");
        localStorage.removeItem("tetap_login");
        window.location = "index.html";
      }

      // -------------------------------------------- Windows Load ------------------------------------------
      window.onload = function(){
        getUsername();
        if(pengguna_saat_ini == null){

          for(var i = 0; i < harus_login.length; i++){
            harus_login[i].remove();
          }

          profile_index.remove()

          profile.href = "register.html"

          foto_prof1.src = "./../assets/img/gambarku/blank.png"

          selamat_datang.innerHTML ="Selamat Datang";

          logout_link.innerHTML="Login";
          logout_link.href="login.html";

          profile.innerHTML="Register";
          // profile.href=""
        }
        else{
          if(pengguna_saat_ini.role != 1){
            document.getElementById('super_admin_button').remove();
            document.getElementById("artikel_button").remove()
          }

          if(pengguna_saat_ini.role == 3){
            document.getElementById("kehadiran").remove()
          }

          foto_prof1.src = pengguna_saat_ini.ImageURL == "null1" ? "./../assets/img/gambarku/blank.png" : pengguna_saat_ini.imageURL

          foto_prof2.src = pengguna_saat_ini.ImageURL == "null1" ? "./../assets/img/gambarku/blank.png" : pengguna_saat_ini.imageURL

          status_pengguna.innerHTML = pengguna_saat_ini.role == 1 ? "Super Admin" : pengguna_saat_ini.role == 2 ? "Admin" : pengguna_saat_ini.role == 3 ? "User" : "" 

          selamat_datang.innerHTML = "Selamat Datang "+pengguna_saat_ini.name;

          for(let i = 0; i<user_link.length; i++){
            user_link[i].innerHTML=pengguna_saat_ini.name;
          }

          logout_link.innerHTML="Logout";
          logout_link.href="javascript:logout()";
        }
      }
    </script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.9/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.9/firebase-analytics.js";
  
  const firebaseConfig = {
          apiKey: "....isi....",
          authDomain: "....isi....",
          databaseURL: "....isi....",
          projectId: "....isi....",
          storageBucket: "....isi....",
          messagingSenderId: "....isi....",
          appId: "....isi....",
          measurementId: "....isi...."
        };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  import { getDatabase, set, ref, update, remove, child, get, push, onValue, query, orderByChild} from "https://www.gstatic.com/firebasejs/9.6.9/firebase-database.js";

  let database = getDatabase(app);
  // console.log(database);
  
  // Reference
  let tertinggi = document.getElementById("tertinggi");
  const starCountRef = query(ref(database,"DataAnak/"), orderByChild("nilai_akhir"));
  get(starCountRef).then((snapshot)=>{
    let data =[]
    let card = ``;
    let dataNama =[]
    
    snapshot.forEach(element => {
      data.push(element.val())
    });
    data.reverse()
    
    for(let i = 0; i<data.length; i++){
      if(i<3){
        card+=`
          <div class="col-md-4 pb-5 d-flex justify-content-around mt-5">
          <div class="card bg-primary text-white" style="width: 18rem;">
          <div class="card-body">
            <h5 class="card-title text-white">${data[i].nama_data}</h5>
            <p>Dengan Nilai Akhir Adalah <b>${data[i].nilai_akhir}</b></p>
          </div>
        </div>
      </div>
          `;
      }
      else{
        break;
      }
    }

    tertinggi.innerHTML = card
  })
</script>
  </body>
</html>
